Description: Build x264 codec as a static library.
 Author: Arthur Huillet <ahuillet@serviware.com>
 Forwarded: not-needed
 
--- a/setup.py	(revision 3336)
+++ b/setup.py	(working copy)
@@ -890,7 +890,11 @@
 
 toggle_packages(x264_ENABLED, "xpra.codecs.x264")
 if x264_ENABLED:
-    x264_pkgconfig = pkgconfig("x264", "libswscale", "libavcodec")
+    x264_pkgconfig = {'include_dirs': ["/usr/local/include"],
+                      'library_dirs': ["/usr/local/lib"],
+                      'extra_link_args': ["-Wl,-soname,x264lib.so", "-Wl,-Bstatic", "-Wl,-Bsymbolic",
+                                      "-lx264", "-lswscale", "-lavcodec", "-lavutil", "-Wl,-Bdynamic"]
+                      }
     cython_add(Extension("xpra.codecs.x264.encoder",
                 ["xpra/codecs/x264/encoder.pyx", "xpra/codecs/x264/x264lib.c"],
                 **x264_pkgconfig), min_version=(0, 16))
